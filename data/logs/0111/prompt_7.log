2025-07-17 09:13:40,635 - INFO - api.snapshot_utils - unk - snapshot_utils.py:36 - Saving snapshots disabled. No bucket name provided.
2025-07-17 09:13:42 PratikLN api.agent_server.agent_client[34741] INFO No auth token available for authorization
2025-07-17 09:13:42 PratikLN api.agent_server.async_server[34741] INFO No token configured, skipping authentication
2025-07-17 09:13:42 PratikLN api.agent_server.async_server[34741] INFO Received message request for application test-bot-846423ea, trace ccdfd00d606a44d1bbb72e65c0f978a9
2025-07-17 09:13:42 PratikLN api.agent_server.async_server[34741] INFO Starting SSE stream for application
2025-07-17 09:13:42 PratikLN api.agent_server.async_server[34741] INFO Using template: nicegui_agent
2025-07-17 09:13:42 PratikLN api.agent_server.async_server[34741] INFO Running agent for session test-bot-846423ea:ccdfd00d606a44d1bbb72e65c0f978a9
2025-07-17 09:13:43 PratikLN api.agent_server.async_server[34741] INFO Creating new agent session for test-bot-846423ea:ccdfd00d606a44d1bbb72e65c0f978a9
2025-07-17 09:13:43 PratikLN api.base_agent_session[34741] INFO Processing request for test-bot-846423ea:ccdfd00d606a44d1bbb72e65c0f978a9
2025-07-17 09:13:43 PratikLN api.base_agent_session[34741] INFO Initializing new session for trace ccdfd00d606a44d1bbb72e65c0f978a9
2025-07-17 09:13:43 PratikLN api.base_agent_session[34741] INFO Last user message: [TextRaw(text='Create a web app that lets users upload a CSV file with student names and their field of interest (Machine Learning, SDE, Data Science, etc.). The app should randomly assign students into teams of 2 people grouped by field. Make assumptions and do not ask more questions')]
2025-07-17 09:13:43 PratikLN llm.utils[34741] INFO Auto-detected backend: gemini
2025-07-17 09:13:43 PratikLN llm.cached[34741] INFO Inferred cache mode lru
2025-07-17 09:13:43 PratikLN llm.cached[34741] INFO loading lru cache from: /mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/llm/caches/272bc3a87d329ea03da98685a95c69d1.json
2025-07-17 09:13:43 PratikLN llm.utils[34741] INFO Auto-detected backend: gemini
2025-07-17 09:13:43 PratikLN llm.cached[34741] INFO Inferred cache mode lru
2025-07-17 09:13:43 PratikLN llm.cached[34741] INFO loading lru cache from: /mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/llm/caches/4f7b1d637bdf7c038af831b7b3afbfbc.json
2025-07-17 09:13:43 PratikLN api.base_agent_session[34741] INFO Looping into next step
2025-07-17 09:13:43 PratikLN llm.cached[34741] INFO lru cache miss: 636407d73ba58b22d4e400b62c4c321d
2025-07-17 09:13:47 PratikLN api.fsm_tools[34741] INFO Starting new FSM session with description: A web application that allows users to upload a CSV file containing student names and their fields of interest. The application will process this file to randomly assign students into teams of exactly two members, ensuring that all members of a team share the same field of interest. If there's an odd number of students for a specific field, the last student in that group will not be assigned to a team. The application should provide a user interface to upload the CSV and display the generated teams in a clear, readable format. The application should store the uploaded student data and the generated team assignments. Uses NiceGUI for the frontend and SQLModel with PostgreSQL for data persistence.
2025-07-17 09:13:47 PratikLN llm.utils[34741] INFO Auto-detected backend: anthropic
2025-07-17 09:13:47 PratikLN llm.cached[34741] INFO Inferred cache mode lru
2025-07-17 09:13:47 PratikLN llm.cached[34741] INFO loading lru cache from: /mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/llm/caches/b5afd28cb246d612bc8da048c0ac053a.json
2025-07-17 09:13:47 PratikLN core.actors[34741] INFO Initialized NiceguiActor with beam_width=3, max_depth=50
2025-07-17 09:13:47 PratikLN core.actors[34741] INFO Initialized NiceguiActor with beam_width=3, max_depth=100
2025-07-17 09:13:47 PratikLN core.statemachine[34741] INFO Processing transition: [] FSMState.DATA_MODEL_GENERATION
2025-07-17 09:13:47 PratikLN api.base_agent_session[34741] INFO Emitting intermediate message: ‚îÉ ‚éø  üöÄ Starting NiceGUI application generation...
2025-07-17 09:13:47 PratikLN nicegui_agent.actors[34741] INFO Start NiceguiActor execution with files: dict_keys([])
2025-07-17 09:13:47 PratikLN nicegui_agent.actors[34741] INFO Selected 1 leaf nodes for evaluation
2025-07-17 09:13:47 PratikLN api.base_agent_session[34741] INFO Emitting intermediate message: üîÑ Working on implementation (step 1)...
2025-07-17 09:13:47 PratikLN nicegui_agent.actors[34741] INFO Iteration 1: Running LLM on 1 candidates
2025-07-17 09:13:47 PratikLN llm.cached[34741] INFO lru cache miss: 4b56908ec20efda48cd8f2f47a92142a
2025-07-17 09:14:04 PratikLN nicegui_agent.actors[34741] INFO Received 1 nodes from LLM
2025-07-17 09:14:04 PratikLN nicegui_agent.actors[34741] INFO Evaluating node 1/1
2025-07-17 09:14:04 PratikLN core.actors[34741] INFO Running tools for node c6d5b9e191f74d9483a305c8e834b27f
2025-07-17 09:14:04 PratikLN core.actors[34741] INFO LLM output: I'll implement the data models for this team assignment application. Let me start by creating the SQLModel classes for storing student data and team assignments.
2025-07-17 09:14:04 PratikLN core.actors[34741] INFO Running tool write_file with input path: app/models.py, content: from sqlmodel import SQLModel, Field, Relationship...
2025-07-17 09:14:04 PratikLN nicegui_agent.actors[34741] INFO Selected 1 leaf nodes for evaluation
2025-07-17 09:14:04 PratikLN api.base_agent_session[34741] INFO Emitting intermediate message: üîÑ Working on implementation (step 2)...
2025-07-17 09:14:04 PratikLN nicegui_agent.actors[34741] INFO Iteration 2: Running LLM on 1 candidates
2025-07-17 09:14:04 PratikLN llm.cached[34741] INFO lru cache miss: 126c7cc2cb718b0720f67432c67732f2
2025-07-17 09:14:06 PratikLN nicegui_agent.actors[34741] INFO Received 1 nodes from LLM
2025-07-17 09:14:06 PratikLN nicegui_agent.actors[34741] INFO Evaluating node 1/1
2025-07-17 09:14:06 PratikLN core.actors[34741] INFO Running tools for node d090ac90de9742a8adea2c4d43625e95
2025-07-17 09:14:06 PratikLN core.actors[34741] INFO LLM output: Now let me run the completion check to ensure the data models are properly implemented and pass all tests:
2025-07-17 09:14:06 PratikLN core.actors[34741] INFO Running tool complete with input 
2025-07-17 09:14:06 PratikLN api.base_agent_session[34741] INFO Emitting intermediate message: ‚îÉ ‚éø  üîç Running validation checks...
2025-07-17 09:14:13 PratikLN api.base_agent_session[34741] INFO Emitting intermediate message: ‚îÉ ‚éø  ‚úì ‚úÖ All validation checks passed
2025-07-17 09:14:13 PratikLN nicegui_agent.actors[34741] INFO Found solution at depth 2
2025-07-17 09:14:13 PratikLN api.base_agent_session[34741] INFO Emitting intermediate message: ‚îÉ ‚éø  ‚úì ‚úÖ NiceGUI application generated successfully
2025-07-17 09:14:13 PratikLN nicegui_agent.application[34741] INFO Updating context files from result
2025-07-17 09:14:13 PratikLN nicegui_agent.application[34741] INFO Running final steps after application generation
2025-07-17 09:14:13 PratikLN core.statemachine[34741] INFO Processing transition: [<FSMState.DATA_MODEL_GENERATION: 'data_model_generation'>] FSMState.REVIEW_DATA_MODEL
2025-07-17 09:14:13 PratikLN api.fsm_tools[34741] INFO First FSM stage completed successfully
2025-07-17 09:14:13 PratikLN api.fsm_tools[34741] INFO Tool call: start_fsm with input: {'app_description': "A web application that allows users to upload a CSV file containing student names and their fields of interest. The application will process this file to randomly assign students into teams of exactly two members, ensuring that all members of a team share the same field of interest. If there's an odd number of students for a specific field, the last student in that group will not be assigned to a team. The application should provide a user interface to upload the CSV and display the generated teams in a clear, readable format. The application should store the uploaded student data and the generated team assignments. Uses NiceGUI for the frontend and SQLModel with PostgreSQL for data persistence."}
2025-07-17 09:14:13 PratikLN api.base_agent_session[34741] INFO Saving FSM state
2025-07-17 09:14:13 PratikLN llm.llm_generators[34741] INFO Generating app name from prompt: A web application that allows users to upload a CS...
2025-07-17 09:14:13 PratikLN llm.cached[34741] INFO lru cache miss: c00356af66826dfb9261052e07e4ccc5
2025-07-17 09:14:14 PratikLN llm.llm_generators[34741] INFO Generated app name: student-team-generator
2025-07-17 09:14:14 PratikLN api.base_agent_session[34741] INFO Getting initial template diff
2025-07-17 09:14:14 PratikLN nicegui_agent.application[34741] INFO SERVER get_diff_with: Received snapshot with 0 files.
2025-07-17 09:14:14 PratikLN nicegui_agent.application[34741] INFO SERVER get_diff_with: Snapshot is empty. Diff will be against template + FSM context files.
2025-07-17 09:14:14 PratikLN nicegui_agent.application[34741] INFO SERVER get_diff_with: Added template directory to workspace
2025-07-17 09:14:14 PratikLN nicegui_agent.application[34741] INFO SERVER get_diff_with: Calling workspace.diff() to generate final diff.
2025-07-17 09:14:14 PratikLN nicegui_agent.application[34741] INFO SERVER get_diff_with: workspace.diff() Succeeded. Diff length: 20222
2025-07-17 09:14:14 PratikLN api.base_agent_session[34741] INFO Sending initial template diff
2025-07-17 09:14:14 PratikLN api.base_agent_session[34741] INFO Got WIP status, skipping sending event due to callback messages were already sent
2025-07-17 09:14:14 PratikLN api.base_agent_session[34741] INFO Looping into next step
2025-07-17 09:14:14 PratikLN llm.cached[34741] INFO lru cache miss: 6f3b5fac40f8a304b549a06366fd2df0
2025-07-17 09:14:17 PratikLN api.fsm_tools[34741] INFO LLM Message:  The `start_fsm` tool was called and returned a successful response. The FSM is now in the `review_data_model` state, indicating that the data models for the application have been generated. The `output` field contains the generated data models for `app/models.py` and `requirements.txt`. The `available_actions` field shows that only the `confirm` action is available at this stage. I should now examine the generated data models and decide whether to confirm them or request changes.

The user wants a web app that takes a CSV file of student names and their fields of interest, then randomly assigns them to teams of 2 within the same field. The app should display these teams and persist the data.

The generated data models are:

**`app/models.py`**:

2025-07-17 09:14:17 PratikLN api.fsm_tools[34741] INFO LLM Message: ```python
import uuid
from typing import List, Optional
from sqlmodel import Field, Relationship, SQLModel

class Student(SQLModel, table=True):
    id: Optional[uuid.UUID] = Field(default_factory=uuid.uuid4, primary_key=True)
    name: str = Field(index=True)
    field_of_interest: str = Field(index=True)
    team_id: Optional[uuid.UUID] = Field(default=None, foreign_key="team.id")
    team: Optional["Team"] = Relationship(back_populates="students")

class Team(SQLModel, table=True):
    id: Optional[uuid.UUID] = Field(default_factory=uuid.uuid4, primary_key=True)
    field_of_interest: str = Field(index=True)
    students: List["Student"] = Relationship(back_populates="team")

class CsvFile(SQLModel, table=True):
    id: Optional[uuid.UUID] = Field(default_factory=uuid.uuid4, primary_key=True)
    file_name: str
    content: bytes
```
2025-07-17 09:14:17 PratikLN api.fsm_tools[34741] INFO LLM Message: 

**`requirements.txt`**:

2025-07-17 09:14:17 PratikLN api.fsm_tools[34741] INFO LLM Message: ```
sqlmodel
fastapi
uvicorn
python-multipart
pandas
nicegui
```
2025-07-17 09:14:17 PratikLN api.fsm_tools[34741] INFO LLM Message: 

The data models seem appropriate.
- `Student` model captures `name` and `field_of_interest`. It also includes `team_id` and a relationship to the `Team` model, which is good for tracking assignments.
- `Team` model has `field_of_interest` to ensure students are grouped by their field, and a relationship to `Student` for team members.
- `CsvFile` model is included to store the uploaded CSV file, which is a reasonable design choice for persistence and potential re-processing.
- `requirements.txt` includes `sqlmodel`, `fastapi`, `uvicorn`, `python-multipart`, `pandas`, and `nicegui`. These are suitable for a NiceGUI application with SQLModel and CSV processing.

The models align with the requirements. I will confirm this state.
2025-07-17 09:14:17 PratikLN api.fsm_tools[34741] INFO Current state before confirmation: FSMState.REVIEW_DATA_MODEL
2025-07-17 09:14:17 PratikLN api.fsm_tools[34741] INFO Confirming current state
2025-07-17 09:14:17 PratikLN core.statemachine[34741] INFO Processing transition: [<FSMState.REVIEW_DATA_MODEL: 'review_data_model'>] FSMState.APPLICATION_GENERATION
2025-07-17 09:14:17 PratikLN api.base_agent_session[34741] INFO Emitting intermediate message: ‚îÉ ‚éø  üöÄ Starting NiceGUI application generation...
2025-07-17 09:14:17 PratikLN nicegui_agent.actors[34741] INFO Start NiceguiActor execution with files: dict_keys(['app/models.py'])
2025-07-17 09:14:18 PratikLN nicegui_agent.actors[34741] INFO Selected 1 leaf nodes for evaluation
2025-07-17 09:14:18 PratikLN api.base_agent_session[34741] INFO Emitting intermediate message: üîÑ Working on implementation (step 1)...
2025-07-17 09:14:18 PratikLN nicegui_agent.actors[34741] INFO Iteration 1: Running LLM on 1 candidates
2025-07-17 09:14:18 PratikLN llm.cached[34741] INFO lru cache miss: b1836801e0c458ed3e3b80cb2a117d6e
2025-07-17 09:14:21 PratikLN nicegui_agent.actors[34741] INFO Received 1 nodes from LLM
2025-07-17 09:14:21 PratikLN nicegui_agent.actors[34741] INFO Evaluating node 1/1
2025-07-17 09:14:21 PratikLN core.actors[34741] INFO Running tools for node cff4d8bee4d040cda2805579ecdecaeb
2025-07-17 09:14:21 PratikLN core.actors[34741] INFO LLM output: I'll implement a web application for team assignment with CSV upload using NiceGUI and SQLModel. Let me start by examining the existing project structure and then build the required components.
2025-07-17 09:14:21 PratikLN core.actors[34741] INFO Running tool read_file with input path: app/models.py
2025-07-17 09:14:21 PratikLN nicegui_agent.actors[34741] INFO Selected 1 leaf nodes for evaluation
2025-07-17 09:14:21 PratikLN api.base_agent_session[34741] INFO Emitting intermediate message: üîÑ Working on implementation (step 2)...
2025-07-17 09:14:21 PratikLN nicegui_agent.actors[34741] INFO Iteration 2: Running LLM on 1 candidates
2025-07-17 09:14:21 PratikLN llm.cached[34741] INFO lru cache miss: b38a3ae35e63f31a5b4c941ec25c28f0
2025-07-17 09:14:26 PratikLN nicegui_agent.actors[34741] INFO Received 1 nodes from LLM
2025-07-17 09:14:26 PratikLN nicegui_agent.actors[34741] INFO Evaluating node 1/1
2025-07-17 09:14:26 PratikLN core.actors[34741] INFO Running tools for node 640183f56fbd4f3e8877802fca58c52a
2025-07-17 09:14:26 PratikLN core.actors[34741] INFO Running tool read_file with input path: app/database.py
2025-07-17 09:14:26 PratikLN nicegui_agent.actors[34741] INFO Selected 1 leaf nodes for evaluation
2025-07-17 09:14:26 PratikLN api.base_agent_session[34741] INFO Emitting intermediate message: üîÑ Working on implementation (step 3)...
2025-07-17 09:14:26 PratikLN nicegui_agent.actors[34741] INFO Iteration 3: Running LLM on 1 candidates
2025-07-17 09:14:26 PratikLN llm.cached[34741] INFO lru cache miss: 81765f05d07717cf3bdc4f151ed3c9a9
2025-07-17 09:14:28 PratikLN nicegui_agent.actors[34741] INFO Received 1 nodes from LLM
2025-07-17 09:14:28 PratikLN nicegui_agent.actors[34741] INFO Evaluating node 1/1
2025-07-17 09:14:28 PratikLN core.actors[34741] INFO Running tools for node 0382fae979a743fdb59a3917a040cf20
2025-07-17 09:14:28 PratikLN core.actors[34741] INFO Running tool read_file with input path: app/startup.py
2025-07-17 09:14:28 PratikLN nicegui_agent.actors[34741] INFO Selected 1 leaf nodes for evaluation
2025-07-17 09:14:28 PratikLN api.base_agent_session[34741] INFO Emitting intermediate message: üîÑ Working on implementation (step 4)...
2025-07-17 09:14:28 PratikLN nicegui_agent.actors[34741] INFO Iteration 4: Running LLM on 1 candidates
2025-07-17 09:14:28 PratikLN llm.cached[34741] INFO lru cache miss: d1dedc7bbe41bb4bbfe9ab1928d69b4d
2025-07-17 09:14:51 PratikLN nicegui_agent.actors[34741] INFO Received 1 nodes from LLM
2025-07-17 09:14:51 PratikLN nicegui_agent.actors[34741] INFO Evaluating node 1/1
2025-07-17 09:14:51 PratikLN core.actors[34741] INFO Running tools for node 32fcd7062c2c4d5fab0ea1818f6d9de9
2025-07-17 09:14:51 PratikLN core.actors[34741] INFO LLM output: Now I'll create the team assignment service that handles the core logic:
2025-07-17 09:14:51 PratikLN core.actors[34741] INFO Running tool write_file with input path: app/team_assignment_service.py, content: import csv
import random
from io import StringIO
f...
2025-07-17 09:14:51 PratikLN nicegui_agent.actors[34741] INFO Selected 1 leaf nodes for evaluation
2025-07-17 09:14:51 PratikLN api.base_agent_session[34741] INFO Emitting intermediate message: üîÑ Working on implementation (step 5)...
2025-07-17 09:14:51 PratikLN nicegui_agent.actors[34741] INFO Iteration 5: Running LLM on 1 candidates
2025-07-17 09:14:51 PratikLN llm.cached[34741] INFO lru cache miss: 71846782c08ee818a3ccaefbc19843f8
2025-07-17 09:15:44 PratikLN nicegui_agent.actors[34741] INFO Received 1 nodes from LLM
2025-07-17 09:15:44 PratikLN nicegui_agent.actors[34741] INFO Evaluating node 1/1
2025-07-17 09:15:44 PratikLN core.actors[34741] INFO Running tools for node db84b0196e444dc3a89169afac5c5812
2025-07-17 09:15:44 PratikLN core.actors[34741] INFO LLM output: Now I'll create the main CSV upload component:
2025-07-17 09:15:44 PratikLN core.actors[34741] INFO Running tool write_file with input path: app/csv_upload.py, content: import csv
from io import StringIO
from typing imp...
2025-07-17 09:15:44 PratikLN nicegui_agent.actors[34741] INFO Selected 1 leaf nodes for evaluation
2025-07-17 09:15:44 PratikLN api.base_agent_session[34741] INFO Emitting intermediate message: üîÑ Working on implementation (step 6)...
2025-07-17 09:15:44 PratikLN nicegui_agent.actors[34741] INFO Iteration 6: Running LLM on 1 candidates
2025-07-17 09:15:44 PratikLN llm.cached[34741] INFO lru cache miss: e20a9ce885b8087d7db739b10c31623b
2025-07-17 09:15:52 PratikLN nicegui_agent.actors[34741] INFO Received 1 nodes from LLM
2025-07-17 09:15:52 PratikLN nicegui_agent.actors[34741] INFO Evaluating node 1/1
2025-07-17 09:15:52 PratikLN core.actors[34741] INFO Running tools for node 196afc6f63ae488884972494b3053619
2025-07-17 09:15:52 PratikLN core.actors[34741] INFO LLM output: Now I'll update the startup.py to integrate the CSV upload component:
2025-07-17 09:15:52 PratikLN core.actors[34741] INFO Running tool edit_file with input path: app/startup.py, search: from app.database import create_tables
from nicegu..., replace: from app.database import create_tables
from nicegu...
2025-07-17 09:15:52 PratikLN nicegui_agent.actors[34741] INFO Selected 1 leaf nodes for evaluation
2025-07-17 09:15:52 PratikLN api.base_agent_session[34741] INFO Emitting intermediate message: üîÑ Working on implementation (step 7)...
2025-07-17 09:15:52 PratikLN nicegui_agent.actors[34741] INFO Iteration 7: Running LLM on 1 candidates
2025-07-17 09:15:52 PratikLN llm.cached[34741] INFO lru cache miss: 58c1dd6f4c00c09618c5518bd2038802
2025-07-17 09:16:47 PratikLN nicegui_agent.actors[34741] INFO Received 1 nodes from LLM
2025-07-17 09:16:47 PratikLN nicegui_agent.actors[34741] INFO Evaluating node 1/1
2025-07-17 09:16:47 PratikLN core.actors[34741] INFO Running tools for node 14d358b0f4324815964bf5781517e8e2
2025-07-17 09:16:47 PratikLN core.actors[34741] INFO LLM output: Now let's create comprehensive tests for our implementation:
2025-07-17 09:16:47 PratikLN core.actors[34741] INFO Running tool write_file with input path: tests/test_team_assignment_service.py, content: import pytest
from app.database import reset_db
fr...
2025-07-17 09:16:47 PratikLN nicegui_agent.actors[34741] INFO Selected 1 leaf nodes for evaluation
2025-07-17 09:16:47 PratikLN api.base_agent_session[34741] INFO Emitting intermediate message: üîÑ Working on implementation (step 8)...
2025-07-17 09:16:47 PratikLN nicegui_agent.actors[34741] INFO Iteration 8: Running LLM on 1 candidates
2025-07-17 09:16:47 PratikLN llm.cached[34741] INFO lru cache miss: 21be81425fdf408cf6fda1c0e69dd169
2025-07-17 09:17:28 PratikLN nicegui_agent.actors[34741] INFO Received 1 nodes from LLM
2025-07-17 09:17:28 PratikLN nicegui_agent.actors[34741] INFO Evaluating node 1/1
2025-07-17 09:17:28 PratikLN core.actors[34741] INFO Running tools for node d4b0d98f71f54c3a806d38d1d9f9af1d
2025-07-17 09:17:28 PratikLN core.actors[34741] INFO LLM output: Now let's create tests for the CSV upload component:
2025-07-17 09:17:28 PratikLN core.actors[34741] INFO Running tool write_file with input path: tests/test_csv_upload.py, content: import pytest
from io import BytesIO
from fastapi....
2025-07-17 09:17:28 PratikLN nicegui_agent.actors[34741] INFO Selected 1 leaf nodes for evaluation
2025-07-17 09:17:28 PratikLN api.base_agent_session[34741] INFO Emitting intermediate message: üîÑ Working on implementation (step 9)...
2025-07-17 09:17:28 PratikLN nicegui_agent.actors[34741] INFO Iteration 9: Running LLM on 1 candidates
2025-07-17 09:17:28 PratikLN llm.cached[34741] INFO lru cache miss: 6d02ca894c67577d35dfc98d489c61ea
2025-07-17 09:17:31 PratikLN nicegui_agent.actors[34741] INFO Received 1 nodes from LLM
2025-07-17 09:17:31 PratikLN nicegui_agent.actors[34741] INFO Evaluating node 1/1
2025-07-17 09:17:31 PratikLN core.actors[34741] INFO Running tools for node d9c0462368dc444eb815c034ae5a8231
2025-07-17 09:17:31 PratikLN core.actors[34741] INFO LLM output: Now let's run the tests to make sure our implementation works correctly:
2025-07-17 09:17:31 PratikLN core.actors[34741] INFO Running tool complete with input 
2025-07-17 09:17:31 PratikLN api.base_agent_session[34741] INFO Emitting intermediate message: ‚îÉ ‚éø  üîç Running validation checks...
2025-07-17 09:17:41 PratikLN nicegui_agent.actors[34741] INFO Type checks failed: /app/app/csv_upload.py
  /app/app/csv_upload.py:78:36 - error: "clear" is not a known attribute of "None" (reportOptionalMemberAccess)
  /app/app/csv_upload.py:103:14 - error: Object of type "None" cannot be used with "with" (reportOptionalContextManager)
  /app/app/csv_upload.py:139:61 - error: Argument of type "int | None" cannot be assigned to parameter "upload_session_id" of type "int" in function "_assign_teams"
  ¬†¬†Type "int | None" is not assignable to type "int"
  ¬†¬†¬†¬†"None" is not assignable to "int" (reportArgumentType)
  /app/app/csv_upload.py:159:43 - error: Argument of type "UploadSession | None" cannot be assigned to parameter "session" of type "UploadSession" in function "_show_assignment_results"
  ¬†¬†Type "UploadSession | None" is not assignable to type "UploadSession"
  ¬†¬†¬†¬†"None" is not assignable to "UploadSession" (reportArgumentType)
  /app/app/csv_upload.py:171:32 - error: "clear" is not a known attribute of "None" (reportOptionalMemberAccess)
  /app/app/csv_upload.py:173:14 - error: Object of type "None" cannot be used with "with" (reportOptionalContextManager)
  /app/app/csv_upload.py:246:32 - error: "clear" is not a known attribute of "None" (reportOptionalMemberAccess)
  /app/app/csv_upload.py:251:33 - error: "clear" is not a known attribute of "None" (reportOptionalMemberAccess)
  /app/app/csv_upload.py:258:14 - error: Object of type "None" cannot be used with "with" (reportOptionalContextManager)
  /app/app/csv_upload.py:283:75 - error: Argument of type "ClickEventArguments" cannot be assigned to parameter "session" of type "UploadSession" in function "_show_session_details"
  ¬†¬†"ClickEventArguments" is not assignable to "UploadSession" (reportArgumentType)
  /app/app/csv_upload.py:289:32 - error: "clear" is not a known attribute of "None" (reportOptionalMemberAccess)
  /app/app/csv_upload.py:291:14 - error: Object of type "None" cannot be used with "with" (reportOptionalContextManager)
/app/app/team_assignment_service.py
  /app/app/team_assignment_service.py:85:39 - error: Argument of type "int | None" cannot be assigned to parameter "upload_session_id" of type "int" in function "__init__"
  ¬†¬†Type "int | None" is not assignable to type "int"
  ¬†¬†¬†¬†"None" is not assignable to "int" (reportArgumentType)
  /app/app/team_assignment_service.py:193:73 - error: Cannot access attribute "desc" for class "datetime"
  ¬†¬†Attribute "desc" is unknown (reportAttributeAccessIssue)
  /app/app/team_assignment_service.py:204:20 - error: Type "Sequence[UploadSession]" is not assignable to return type "List[UploadSession]"
  ¬†¬†"Sequence[UploadSession]" is not assignable to "List[UploadSession]" (reportReturnType)
/app/tests/test_csv_upload.py
  /app/tests/test_csv_upload.py:184:30 - error: Argument of type "int | None" cannot be assigned to parameter "upload_session_id" of type "int" in function "assign_teams"
  ¬†¬†Type "int | None" is not assignable to type "int"
  ¬†¬†¬†¬†"None" is not assignable to "int" (reportArgumentType)
  /app/tests/test_csv_upload.py:203:30 - error: Argument of type "int | None" cannot be assigned to parameter "upload_session_id" of type "int" in function "assign_teams"
  ¬†¬†Type "int | None" is not assignable to type "int"
  ¬†¬†¬†¬†"None" is not assignable to "int" (reportArgumentType)
17 errors, 0 warnings, 0 informations 


2025-07-17 09:17:41 PratikLN nicegui_agent.actors[34741] INFO Tests failed: EEEEE...EEEEEEEEE...........FFFFFFFF.FF.F.F                              [100%]
==================================== ERRORS ====================================
___________ ERROR at setup of TestCSVUploadUI.test_upload_page_loads ___________
E   RuntimeError: The current slot cannot be determined because the slot stack for this task is empty.
    This may happen if you try to create UI from a background task.
    To fix this, enter the target slot explicitly using `with container_element:`.
---------------------------- Captured stdout setup -----------------------------
2025-07-17 07:17:37,848 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-07-17 07:17:37,849 INFO sqlalchemy.engine.Engine [raw sql] {}
2025-07-17 07:17:37,849 INFO sqlalchemy.engine.Engine select current_schema()
2025-07-17 07:17:37,849 INFO sqlalchemy.engine.Engine [raw sql] {}
2025-07-17 07:17:37,850 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-07-17 07:17:37,850 INFO sqlalchemy.engine.Engine [raw sql] {}
2025-07-17 07:17:37,850 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-07-17 07:17:37,852 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,853 INFO sqlalchemy.engine.Engine [generated in 0.00011s] {'table_name': 'students', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,855 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,855 INFO sqlalchemy.engine.Engine [cached since 0.002214s ago] {'table_name': 'teams', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,855 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,855 INFO sqlalchemy.engine.Engine [cached since 0.002648s ago] {'table_name': 'upload_sessions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,856 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,856 INFO sqlalchemy.engine.Engine [generated in 0.00008s] {'typname_1': 'teamstatus', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,857 INFO sqlalchemy.engine.Engine CREATE TYPE teamstatus AS ENUM ('PENDING', 'ASSIGNED', 'UNASSIGNED')
2025-07-17 07:17:37,857 INFO sqlalchemy.engine.Engine [no key 0.00005s] {}
2025-07-17 07:17:37,858 INFO sqlalchemy.engine.Engine 
CREATE TABLE upload_sessions (
	id SERIAL NOT NULL, 
	filename VARCHAR(255) NOT NULL, 
	total_students INTEGER NOT NULL, 
	total_teams INTEGER NOT NULL, 
	unassigned_students INTEGER NOT NULL, 
	status teamstatus NOT NULL, 
	created_at TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	processed_at TIMESTAMP WITHOUT TIME ZONE, 
	PRIMARY KEY (id)
)


2025-07-17 07:17:37,858 INFO sqlalchemy.engine.Engine [no key 0.00006s] {}
2025-07-17 07:17:37,862 INFO sqlalchemy.engine.Engine 
CREATE TABLE teams (
	id SERIAL NOT NULL, 
	name VARCHAR(200) NOT NULL, 
	field_of_interest VARCHAR(200) NOT NULL, 
	upload_session_id INTEGER NOT NULL, 
	created_at TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(upload_session_id) REFERENCES upload_sessions (id)
)


2025-07-17 07:17:37,862 INFO sqlalchemy.engine.Engine [no key 0.00006s] {}
2025-07-17 07:17:37,864 INFO sqlalchemy.engine.Engine 
CREATE TABLE students (
	id SERIAL NOT NULL, 
	name VARCHAR(200) NOT NULL, 
	field_of_interest VARCHAR(200) NOT NULL, 
	upload_session_id INTEGER NOT NULL, 
	team_id INTEGER, 
	created_at TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(upload_session_id) REFERENCES upload_sessions (id), 
	FOREIGN KEY(team_id) REFERENCES teams (id)
)


2025-07-17 07:17:37,864 INFO sqlalchemy.engine.Engine [no key 0.00006s] {}
2025-07-17 07:17:37,867 INFO sqlalchemy.engine.Engine COMMIT
___________ ERROR at setup of TestCSVUploadUI.test_upload_valid_csv ____________
E   RuntimeError: The current slot cannot be determined because the slot stack for this task is empty.
    This may happen if you try to create UI from a background task.
    To fix this, enter the target slot explicitly using `with container_element:`.
---------------------------- Captured stdout setup -----------------------------
2025-07-17 07:17:37,875 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-07-17 07:17:37,875 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,875 INFO sqlalchemy.engine.Engine [cached since 0.02246s ago] {'table_name': 'students', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,876 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,876 INFO sqlalchemy.engine.Engine [cached since 0.02323s ago] {'table_name': 'teams', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,876 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,876 INFO sqlalchemy.engine.Engine [cached since 0.02368s ago] {'table_name': 'upload_sessions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,877 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,877 INFO sqlalchemy.engine.Engine [cached since 0.02068s ago] {'typname_1': 'teamstatus', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,877 INFO sqlalchemy.engine.Engine COMMIT
__________ ERROR at setup of TestCSVUploadUI.test_upload_invalid_csv ___________
E   RuntimeError: The current slot cannot be determined because the slot stack for this task is empty.
    This may happen if you try to create UI from a background task.
    To fix this, enter the target slot explicitly using `with container_element:`.
---------------------------- Captured stdout setup -----------------------------
2025-07-17 07:17:37,882 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-07-17 07:17:37,882 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,882 INFO sqlalchemy.engine.Engine [cached since 0.02999s ago] {'table_name': 'students', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,883 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,883 INFO sqlalchemy.engine.Engine [cached since 0.03079s ago] {'table_name': 'teams', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,884 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,884 INFO sqlalchemy.engine.Engine [cached since 0.03121s ago] {'table_name': 'upload_sessions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,884 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,884 INFO sqlalchemy.engine.Engine [cached since 0.02818s ago] {'typname_1': 'teamstatus', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,885 INFO sqlalchemy.engine.Engine COMMIT
_________ ERROR at setup of TestCSVUploadUI.test_team_assignment_flow __________
E   RuntimeError: The current slot cannot be determined because the slot stack for this task is empty.
    This may happen if you try to create UI from a background task.
    To fix this, enter the target slot explicitly using `with container_element:`.
---------------------------- Captured stdout setup -----------------------------
2025-07-17 07:17:37,892 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-07-17 07:17:37,893 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,893 INFO sqlalchemy.engine.Engine [cached since 0.04017s ago] {'table_name': 'students', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,893 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,893 INFO sqlalchemy.engine.Engine [cached since 0.04091s ago] {'table_name': 'teams', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,894 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,894 INFO sqlalchemy.engine.Engine [cached since 0.04144s ago] {'table_name': 'upload_sessions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,895 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,895 INFO sqlalchemy.engine.Engine [cached since 0.03849s ago] {'typname_1': 'teamstatus', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,895 INFO sqlalchemy.engine.Engine COMMIT
_____________ ERROR at setup of TestCSVUploadUI.test_cancel_upload _____________
E   RuntimeError: The current slot cannot be determined because the slot stack for this task is empty.
    This may happen if you try to create UI from a background task.
    To fix this, enter the target slot explicitly using `with container_element:`.
---------------------------- Captured stdout setup -----------------------------
2025-07-17 07:17:37,900 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-07-17 07:17:37,900 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,900 INFO sqlalchemy.engine.Engine [cached since 0.04804s ago] {'table_name': 'students', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,901 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,901 INFO sqlalchemy.engine.Engine [cached since 0.04875s ago] {'table_name': 'teams', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,902 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,902 INFO sqlalchemy.engine.Engine [cached since 0.04924s ago] {'table_name': 'upload_sessions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,902 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,902 INFO sqlalchemy.engine.Engine [cached since 0.04627s ago] {'typname_1': 'teamstatus', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,903 INFO sqlalchemy.engine.Engine COMMIT
__ ERROR at setup of TestPreviousSessionsDisplay.test_previous_sessions_empty __
E   RuntimeError: The current slot cannot be determined because the slot stack for this task is empty.
    This may happen if you try to create UI from a background task.
    To fix this, enter the target slot explicitly using `with container_element:`.
---------------------------- Captured stdout setup -----------------------------
2025-07-17 07:17:37,988 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-07-17 07:17:37,988 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,988 INFO sqlalchemy.engine.Engine [cached since 0.1355s ago] {'table_name': 'students', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,989 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,989 INFO sqlalchemy.engine.Engine [cached since 0.1362s ago] {'table_name': 'teams', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,989 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,989 INFO sqlalchemy.engine.Engine [cached since 0.1367s ago] {'table_name': 'upload_sessions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,990 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,990 INFO sqlalchemy.engine.Engine [cached since 0.1337s ago] {'typname_1': 'teamstatus', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,990 INFO sqlalchemy.engine.Engine COMMIT
_ ERROR at setup of TestPreviousSessionsDisplay.test_previous_sessions_display _
E   RuntimeError: The current slot cannot be determined because the slot stack for this task is empty.
    This may happen if you try to create UI from a background task.
    To fix this, enter the target slot explicitly using `with container_element:`.
---------------------------- Captured stdout setup -----------------------------
2025-07-17 07:17:37,995 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-07-17 07:17:37,995 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,995 INFO sqlalchemy.engine.Engine [cached since 0.143s ago] {'table_name': 'students', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,996 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,996 INFO sqlalchemy.engine.Engine [cached since 0.1436s ago] {'table_name': 'teams', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,996 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,997 INFO sqlalchemy.engine.Engine [cached since 0.1441s ago] {'table_name': 'upload_sessions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,997 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,997 INFO sqlalchemy.engine.Engine [cached since 0.141s ago] {'typname_1': 'teamstatus', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,997 INFO sqlalchemy.engine.Engine COMMIT
___ ERROR at setup of TestPreviousSessionsDisplay.test_view_session_details ____
E   RuntimeError: The current slot cannot be determined because the slot stack for this task is empty.
    This may happen if you try to create UI from a background task.
    To fix this, enter the target slot explicitly using `with container_element:`.
---------------------------- Captured stdout setup -----------------------------
2025-07-17 07:17:38,002 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-07-17 07:17:38,002 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,002 INFO sqlalchemy.engine.Engine [cached since 0.1498s ago] {'table_name': 'students', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,003 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,003 INFO sqlalchemy.engine.Engine [cached since 0.1505s ago] {'table_name': 'teams', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,003 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,003 INFO sqlalchemy.engine.Engine [cached since 0.151s ago] {'table_name': 'upload_sessions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,004 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,004 INFO sqlalchemy.engine.Engine [cached since 0.1481s ago] {'typname_1': 'teamstatus', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,005 INFO sqlalchemy.engine.Engine COMMIT
___________ ERROR at setup of TestErrorHandling.test_file_size_limit ___________
E   RuntimeError: The current slot cannot be determined because the slot stack for this task is empty.
    This may happen if you try to create UI from a background task.
    To fix this, enter the target slot explicitly using `with container_element:`.
---------------------------- Captured stdout setup -----------------------------
2025-07-17 07:17:38,010 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-07-17 07:17:38,010 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,010 INFO sqlalchemy.engine.Engine [cached since 0.1579s ago] {'table_name': 'students', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,011 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,011 INFO sqlalchemy.engine.Engine [cached since 0.1587s ago] {'table_name': 'teams', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,012 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,012 INFO sqlalchemy.engine.Engine [cached since 0.1593s ago] {'table_name': 'upload_sessions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,012 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,013 INFO sqlalchemy.engine.Engine [cached since 0.1564s ago] {'typname_1': 'teamstatus', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,013 INFO sqlalchemy.engine.Engine COMMIT
__________ ERROR at setup of TestErrorHandling.test_invalid_file_type __________
E   RuntimeError: The current slot cannot be determined because the slot stack for this task is empty.
    This may happen if you try to create UI from a background task.
    To fix this, enter the target slot explicitly using `with container_element:`.
---------------------------- Captured stdout setup -----------------------------
2025-07-17 07:17:38,019 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-07-17 07:17:38,019 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,019 INFO sqlalchemy.engine.Engine [cached since 0.1666s ago] {'table_name': 'students', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,020 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,020 INFO sqlalchemy.engine.Engine [cached since 0.1673s ago] {'table_name': 'teams', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,020 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,020 INFO sqlalchemy.engine.Engine [cached since 0.1679s ago] {'table_name': 'upload_sessions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,021 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,021 INFO sqlalchemy.engine.Engine [cached since 0.1649s ago] {'typname_1': 'teamstatus', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,021 INFO sqlalchemy.engine.Engine COMMIT
___________ ERROR at setup of TestErrorHandling.test_encoding_error ____________
E   RuntimeError: The current slot cannot be determined because the slot stack for this task is empty.
    This may happen if you try to create UI from a background task.
    To fix this, enter the target slot explicitly using `with container_element:`.
---------------------------- Captured stdout setup -----------------------------
2025-07-17 07:17:38,026 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-07-17 07:17:38,026 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,026 INFO sqlalchemy.engine.Engine [cached since 0.174s ago] {'table_name': 'students', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,027 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,027 INFO sqlalchemy.engine.Engine [cached since 0.1748s ago] {'table_name': 'teams', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,028 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,028 INFO sqlalchemy.engine.Engine [cached since 0.1753s ago] {'table_name': 'upload_sessions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,028 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,028 INFO sqlalchemy.engine.Engine [cached since 0.1723s ago] {'typname_1': 'teamstatus', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,029 INFO sqlalchemy.engine.Engine COMMIT
________ ERROR at setup of TestUIResponsiveness.test_responsive_layout _________
E   RuntimeError: The current slot cannot be determined because the slot stack for this task is empty.
    This may happen if you try to create UI from a background task.
    To fix this, enter the target slot explicitly using `with container_element:`.
---------------------------- Captured stdout setup -----------------------------
2025-07-17 07:17:38,034 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-07-17 07:17:38,034 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,034 INFO sqlalchemy.engine.Engine [cached since 0.1813s ago] {'table_name': 'students', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,035 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,035 INFO sqlalchemy.engine.Engine [cached since 0.1822s ago] {'table_name': 'teams', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,035 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,035 INFO sqlalchemy.engine.Engine [cached since 0.1827s ago] {'table_name': 'upload_sessions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,036 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,036 INFO sqlalchemy.engine.Engine [cached since 0.1799s ago] {'typname_1': 'teamstatus', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,037 INFO sqlalchemy.engine.Engine COMMIT
_______ ERROR at setup of TestUIResponsiveness.test_upload_area_styling ________
E   RuntimeError: The current slot cannot be determined because the slot stack for this task is empty.
    This may happen if you try to create UI from a background task.
    To fix this, enter the target slot explicitly using `with container_element:`.
---------------------------- Captured stdout setup -----------------------------
2025-07-17 07:17:38,042 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-07-17 07:17:38,042 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,042 INFO sqlalchemy.engine.Engine [cached since 0.1899s ago] {'table_name': 'students', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,043 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,043 INFO sqlalchemy.engine.Engine [cached since 0.1907s ago] {'table_name': 'teams', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,043 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,044 INFO sqlalchemy.engine.Engine [cached since 0.1911s ago] {'table_name': 'upload_sessions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,044 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,044 INFO sqlalchemy.engine.Engine [cached since 0.188s ago] {'typname_1': 'teamstatus', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,044 INFO sqlalchemy.engine.Engine COMMIT
___________ ERROR at setup of TestUIResponsiveness.test_card_layouts ___________
E   RuntimeError: The current slot cannot be determined because the slot stack for this task is empty.
    This may happen if you try to create UI from a background task.
    To fix this, enter the target slot explicitly using `with container_element:`.
---------------------------- Captured stdout setup -----------------------------
2025-07-17 07:17:38,050 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-07-17 07:17:38,050 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,050 INFO sqlalchemy.engine.Engine [cached since 0.1973s ago] {'table_name': 'students', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,050 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,050 INFO sqlalchemy.engine.Engine [cached since 0.1979s ago] {'table_name': 'teams', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,051 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,051 INFO sqlalchemy.engine.Engine [cached since 0.1983s ago] {'table_name': 'upload_sessions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,051 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,051 INFO sqlalchemy.engine.Engine [cached since 0.1953s ago] {'typname_1': 'teamstatus', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,052 INFO sqlalchemy.engine.Engine COMMIT
=================================== FAILURES ===================================
/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/loading.py:1603: sqlalchemy.orm.exc.DetachedInstanceError: Instance <UploadSession at 0x72cd404c8eb0> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/loading.py:1603: sqlalchemy.orm.exc.DetachedInstanceError: Instance <UploadSession at 0x72cd404caf30> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/loading.py:1603: sqlalchemy.orm.exc.DetachedInstanceError: Instance <UploadSession at 0x72cd404cae90> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/loading.py:1603: sqlalchemy.orm.exc.DetachedInstanceError: Instance <UploadSession at 0x72cd404c8be0> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/loading.py:1603: sqlalchemy.orm.exc.DetachedInstanceError: Instance <UploadSession at 0x72cd404ca210> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/loading.py:1603: sqlalchemy.orm.exc.DetachedInstanceError: Instance <UploadSession at 0x72cd404cbed0> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/loading.py:1603: sqlalchemy.orm.exc.DetachedInstanceError: Instance <UploadSession at 0x72cd404cb1b0> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/loading.py:1603: sqlalchemy.orm.exc.DetachedInstanceError: Instance <UploadSession at 0x72cd40440370> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/loading.py:1603: sqlalchemy.orm.exc.DetachedInstanceError: Instance <UploadSession at 0x72cd404cb1b0> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/loading.py:1603: sqlalchemy.orm.exc.DetachedInstanceError: Instance <UploadSession at 0x72cd40441f40> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/loading.py:1603: sqlalchemy.orm.exc.DetachedInstanceError: Instance <UploadSession at 0x72cd40441fe0> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/loading.py:1603: sqlalchemy.orm.exc.DetachedInstanceError: Instance <UploadSession at 0x72cd40bcb390> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
=========================== short test summary info ============================
FAILED tests/test_team_assignment_service.py::TestUploadSession::test_create_upload_session
FAILED tests/test_team_assignment_service.py::TestUploadSession::test_create_upload_session_stores_students
FAILED tests/test_team_assignment_service.py::TestTeamAssignment::test_assign_teams_basic
FAILED tests/test_team_assignment_service.py::TestTeamAssignment::test_assign_teams_even_distribution
FAILED tests/test_team_assignment_service.py::TestTeamAssignment::test_assign_teams_all_unassigned
FAILED tests/test_team_assignment_service.py::TestTeamAssignment::test_assign_teams_updates_session
FAILED tests/test_team_assignment_service.py::TestTeamAssignment::test_assign_teams_creates_team_records
FAILED tests/test_team_assignment_service.py::TestTeamAssignment::test_assign_teams_assigns_students_to_teams
FAILED tests/test_team_assignment_service.py::TestTeamAssignment::test_assign_teams_session_without_students
FAILED tests/test_team_assignment_service.py::TestSessionRetrieval::test_get_upload_session_with_teams
FAILED tests/test_team_assignment_service.py::TestSessionRetrieval::test_get_all_upload_sessions
FAILED tests/test_team_assignment_service.py::TestRandomization::test_team_assignment_randomization
ERROR tests/test_csv_upload.py::TestCSVUploadUI::test_upload_page_loads - Run...
ERROR tests/test_csv_upload.py::TestCSVUploadUI::test_upload_valid_csv - Runt...
ERROR tests/test_csv_upload.py::TestCSVUploadUI::test_upload_invalid_csv - Ru...
ERROR tests/test_csv_upload.py::TestCSVUploadUI::test_team_assignment_flow - ...
ERROR tests/test_csv_upload.py::TestCSVUploadUI::test_cancel_upload - Runtime...
ERROR tests/test_csv_upload.py::TestPreviousSessionsDisplay::test_previous_sessions_empty
ERROR tests/test_csv_upload.py::TestPreviousSessionsDisplay::test_previous_sessions_display
ERROR tests/test_csv_upload.py::TestPreviousSessionsDisplay::test_view_session_details
ERROR tests/test_csv_upload.py::TestErrorHandling::test_file_size_limit - Run...
ERROR tests/test_csv_upload.py::TestErrorHandling::test_invalid_file_type - R...
ERROR tests/test_csv_upload.py::TestErrorHandling::test_encoding_error - Runt...
ERROR tests/test_csv_upload.py::TestUIResponsiveness::test_responsive_layout
ERROR tests/test_csv_upload.py::TestUIResponsiveness::test_upload_area_styling
ERROR tests/test_csv_upload.py::TestUIResponsiveness::test_card_layouts - Run...
12 failed, 17 passed, 1 deselected, 14 errors in 0.95s


2025-07-17 09:17:41 PratikLN api.base_agent_session[34741] INFO Emitting intermediate message: ‚îÉ ‚éø  ‚úó ‚ùå Validation checks failed - fixing issues
2025-07-17 09:17:41 PratikLN core.actors[34741] INFO Failed to complete: Type errors:
/app/app/csv_upload.py
  /app/app/csv_upload.py:78:36 - error: "clear" is not a known attribute of "None" (reportOptionalMemberAccess)
  /app/app/csv_upload.py:103:14 - error: Object of type "None" cannot be used with "with" (reportOptionalContextManager)
  /app/app/csv_upload.py:139:61 - error: Argument of type "int | None" cannot be assigned to parameter "upload_session_id" of type "int" in function "_assign_teams"
  ¬†¬†Type "int | None" is not assignable to type "int"
  ¬†¬†¬†¬†"None" is not assignable to "int" (reportArgumentType)
  /app/app/csv_upload.py:159:43 - error: Argument of type "UploadSession | None" cannot be assigned to parameter "session" of type "UploadSession" in function "_show_assignment_results"
  ¬†¬†Type "UploadSession | None" is not assignable to type "UploadSession"
  ¬†¬†¬†¬†"None" is not assignable to "UploadSession" (reportArgumentType)
  /app/app/csv_upload.py:171:32 - error: "clear" is not a known attribute of "None" (reportOptionalMemberAccess)
  /app/app/csv_upload.py:173:14 - error: Object of type "None" cannot be used with "with" (reportOptionalContextManager)
  /app/app/csv_upload.py:246:32 - error: "clear" is not a known attribute of "None" (reportOptionalMemberAccess)
  /app/app/csv_upload.py:251:33 - error: "clear" is not a known attribute of "None" (reportOptionalMemberAccess)
  /app/app/csv_upload.py:258:14 - error: Object of type "None" cannot be used with "with" (reportOptionalContextManager)
  /app/app/csv_upload.py:283:75 - error: Argument of type "ClickEventArguments" cannot be assigned to parameter "session" of type "UploadSession" in function "_show_session_details"
  ¬†¬†"ClickEventArguments" is not assignable to "UploadSession" (reportArgumentType)
  /app/app/csv_upload.py:289:32 - error: "clear" is not a known attribute of "None" (reportOptionalMemberAccess)
  /app/app/csv_upload.py:291:14 - error: Object of type "None" cannot be used with "with" (reportOptionalContextManager)
/app/app/team_assignment_service.py
  /app/app/team_assignment_service.py:85:39 - error: Argument of type "int | None" cannot be assigned to parameter "upload_session_id" of type "int" in function "__init__"
  ¬†¬†Type "int | None" is not assignable to type "int"
  ¬†¬†¬†¬†"None" is not assignable to "int" (reportArgumentType)
  /app/app/team_assignment_service.py:193:73 - error: Cannot access attribute "desc" for class "datetime"
  ¬†¬†Attribute "desc" is unknown (reportAttributeAccessIssue)
  /app/app/team_assignment_service.py:204:20 - error: Type "Sequence[UploadSession]" is not assignable to return type "List[UploadSession]"
  ¬†¬†"Sequence[UploadSession]" is not assignable to "List[UploadSession]" (reportReturnType)
/app/tests/test_csv_upload.py
  /app/tests/test_csv_upload.py:184:30 - error: Argument of type "int | None" cannot be assigned to parameter "upload_session_id" of type "int" in function "assign_teams"
  ¬†¬†Type "int | None" is not assignable to type "int"
  ¬†¬†¬†¬†"None" is not assignable to "int" (reportArgumentType)
  /app/tests/test_csv_upload.py:203:30 - error: Argument of type "int | None" cannot be assigned to parameter "upload_session_id" of type "int" in function "assign_teams"
  ¬†¬†Type "int | None" is not assignable to type "int"
  ¬†¬†¬†¬†"None" is not assignable to "int" (reportArgumentType)
17 errors, 0 warnings, 0 informations 


Test errors:
EEEEE...EEEEEEEEE...........FFFFFFFF.FF.F.F                              [100%]
==================================== ERRORS ====================================
___________ ERROR at setup of TestCSVUploadUI.test_upload_page_loads ___________
E   RuntimeError: The current slot cannot be determined because the slot stack for this task is empty.
    This may happen if you try to create UI from a background task.
    To fix this, enter the target slot explicitly using `with container_element:`.
---------------------------- Captured stdout setup -----------------------------
2025-07-17 07:17:37,848 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-07-17 07:17:37,849 INFO sqlalchemy.engine.Engine [raw sql] {}
2025-07-17 07:17:37,849 INFO sqlalchemy.engine.Engine select current_schema()
2025-07-17 07:17:37,849 INFO sqlalchemy.engine.Engine [raw sql] {}
2025-07-17 07:17:37,850 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-07-17 07:17:37,850 INFO sqlalchemy.engine.Engine [raw sql] {}
2025-07-17 07:17:37,850 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-07-17 07:17:37,852 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,853 INFO sqlalchemy.engine.Engine [generated in 0.00011s] {'table_name': 'students', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,855 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,855 INFO sqlalchemy.engine.Engine [cached since 0.002214s ago] {'table_name': 'teams', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,855 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,855 INFO sqlalchemy.engine.Engine [cached since 0.002648s ago] {'table_name': 'upload_sessions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,856 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,856 INFO sqlalchemy.engine.Engine [generated in 0.00008s] {'typname_1': 'teamstatus', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,857 INFO sqlalchemy.engine.Engine CREATE TYPE teamstatus AS ENUM ('PENDING', 'ASSIGNED', 'UNASSIGNED')
2025-07-17 07:17:37,857 INFO sqlalchemy.engine.Engine [no key 0.00005s] {}
2025-07-17 07:17:37,858 INFO sqlalchemy.engine.Engine 
CREATE TABLE upload_sessions (
	id SERIAL NOT NULL, 
	filename VARCHAR(255) NOT NULL, 
	total_students INTEGER NOT NULL, 
	total_teams INTEGER NOT NULL, 
	unassigned_students INTEGER NOT NULL, 
	status teamstatus NOT NULL, 
	created_at TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	processed_at TIMESTAMP WITHOUT TIME ZONE, 
	PRIMARY KEY (id)
)


2025-07-17 07:17:37,858 INFO sqlalchemy.engine.Engine [no key 0.00006s] {}
2025-07-17 07:17:37,862 INFO sqlalchemy.engine.Engine 
CREATE TABLE teams (
	id SERIAL NOT NULL, 
	name VARCHAR(200) NOT NULL, 
	field_of_interest VARCHAR(200) NOT NULL, 
	upload_session_id INTEGER NOT NULL, 
	created_at TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(upload_session_id) REFERENCES upload_sessions (id)
)


2025-07-17 07:17:37,862 INFO sqlalchemy.engine.Engine [no key 0.00006s] {}
2025-07-17 07:17:37,864 INFO sqlalchemy.engine.Engine 
CREATE TABLE students (
	id SERIAL NOT NULL, 
	name VARCHAR(200) NOT NULL, 
	field_of_interest VARCHAR(200) NOT NULL, 
	upload_session_id INTEGER NOT NULL, 
	team_id INTEGER, 
	created_at TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(upload_session_id) REFERENCES upload_sessions (id), 
	FOREIGN KEY(team_id) REFERENCES teams (id)
)


2025-07-17 07:17:37,864 INFO sqlalchemy.engine.Engine [no key 0.00006s] {}
2025-07-17 07:17:37,867 INFO sqlalchemy.engine.Engine COMMIT
___________ ERROR at setup of TestCSVUploadUI.test_upload_valid_csv ____________
E   RuntimeError: The current slot cannot be determined because the slot stack for this task is empty.
    This may happen if you try to create UI from a background task.
    To fix this, enter the target slot explicitly using `with container_element:`.
---------------------------- Captured stdout setup -----------------------------
2025-07-17 07:17:37,875 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-07-17 07:17:37,875 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,875 INFO sqlalchemy.engine.Engine [cached since 0.02246s ago] {'table_name': 'students', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,876 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,876 INFO sqlalchemy.engine.Engine [cached since 0.02323s ago] {'table_name': 'teams', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,876 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,876 INFO sqlalchemy.engine.Engine [cached since 0.02368s ago] {'table_name': 'upload_sessions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,877 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,877 INFO sqlalchemy.engine.Engine [cached since 0.02068s ago] {'typname_1': 'teamstatus', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,877 INFO sqlalchemy.engine.Engine COMMIT
__________ ERROR at setup of TestCSVUploadUI.test_upload_invalid_csv ___________
E   RuntimeError: The current slot cannot be determined because the slot stack for this task is empty.
    This may happen if you try to create UI from a background task.
    To fix this, enter the target slot explicitly using `with container_element:`.
---------------------------- Captured stdout setup -----------------------------
2025-07-17 07:17:37,882 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-07-17 07:17:37,882 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,882 INFO sqlalchemy.engine.Engine [cached since 0.02999s ago] {'table_name': 'students', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,883 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,883 INFO sqlalchemy.engine.Engine [cached since 0.03079s ago] {'table_name': 'teams', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,884 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,884 INFO sqlalchemy.engine.Engine [cached since 0.03121s ago] {'table_name': 'upload_sessions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,884 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,884 INFO sqlalchemy.engine.Engine [cached since 0.02818s ago] {'typname_1': 'teamstatus', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,885 INFO sqlalchemy.engine.Engine COMMIT
_________ ERROR at setup of TestCSVUploadUI.test_team_assignment_flow __________
E   RuntimeError: The current slot cannot be determined because the slot stack for this task is empty.
    This may happen if you try to create UI from a background task.
    To fix this, enter the target slot explicitly using `with container_element:`.
---------------------------- Captured stdout setup -----------------------------
2025-07-17 07:17:37,892 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-07-17 07:17:37,893 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,893 INFO sqlalchemy.engine.Engine [cached since 0.04017s ago] {'table_name': 'students', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,893 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,893 INFO sqlalchemy.engine.Engine [cached since 0.04091s ago] {'table_name': 'teams', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,894 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,894 INFO sqlalchemy.engine.Engine [cached since 0.04144s ago] {'table_name': 'upload_sessions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,895 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,895 INFO sqlalchemy.engine.Engine [cached since 0.03849s ago] {'typname_1': 'teamstatus', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,895 INFO sqlalchemy.engine.Engine COMMIT
_____________ ERROR at setup of TestCSVUploadUI.test_cancel_upload _____________
E   RuntimeError: The current slot cannot be determined because the slot stack for this task is empty.
    This may happen if you try to create UI from a background task.
    To fix this, enter the target slot explicitly using `with container_element:`.
---------------------------- Captured stdout setup -----------------------------
2025-07-17 07:17:37,900 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-07-17 07:17:37,900 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,900 INFO sqlalchemy.engine.Engine [cached since 0.04804s ago] {'table_name': 'students', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,901 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,901 INFO sqlalchemy.engine.Engine [cached since 0.04875s ago] {'table_name': 'teams', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,902 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,902 INFO sqlalchemy.engine.Engine [cached since 0.04924s ago] {'table_name': 'upload_sessions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,902 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,902 INFO sqlalchemy.engine.Engine [cached since 0.04627s ago] {'typname_1': 'teamstatus', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,903 INFO sqlalchemy.engine.Engine COMMIT
__ ERROR at setup of TestPreviousSessionsDisplay.test_previous_sessions_empty __
E   RuntimeError: The current slot cannot be determined because the slot stack for this task is empty.
    This may happen if you try to create UI from a background task.
    To fix this, enter the target slot explicitly using `with container_element:`.
---------------------------- Captured stdout setup -----------------------------
2025-07-17 07:17:37,988 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-07-17 07:17:37,988 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,988 INFO sqlalchemy.engine.Engine [cached since 0.1355s ago] {'table_name': 'students', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,989 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,989 INFO sqlalchemy.engine.Engine [cached since 0.1362s ago] {'table_name': 'teams', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,989 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,989 INFO sqlalchemy.engine.Engine [cached since 0.1367s ago] {'table_name': 'upload_sessions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,990 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,990 INFO sqlalchemy.engine.Engine [cached since 0.1337s ago] {'typname_1': 'teamstatus', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,990 INFO sqlalchemy.engine.Engine COMMIT
_ ERROR at setup of TestPreviousSessionsDisplay.test_previous_sessions_display _
E   RuntimeError: The current slot cannot be determined because the slot stack for this task is empty.
    This may happen if you try to create UI from a background task.
    To fix this, enter the target slot explicitly using `with container_element:`.
---------------------------- Captured stdout setup -----------------------------
2025-07-17 07:17:37,995 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-07-17 07:17:37,995 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,995 INFO sqlalchemy.engine.Engine [cached since 0.143s ago] {'table_name': 'students', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,996 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,996 INFO sqlalchemy.engine.Engine [cached since 0.1436s ago] {'table_name': 'teams', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,996 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,997 INFO sqlalchemy.engine.Engine [cached since 0.1441s ago] {'table_name': 'upload_sessions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,997 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:37,997 INFO sqlalchemy.engine.Engine [cached since 0.141s ago] {'typname_1': 'teamstatus', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:37,997 INFO sqlalchemy.engine.Engine COMMIT
___ ERROR at setup of TestPreviousSessionsDisplay.test_view_session_details ____
E   RuntimeError: The current slot cannot be determined because the slot stack for this task is empty.
    This may happen if you try to create UI from a background task.
    To fix this, enter the target slot explicitly using `with container_element:`.
---------------------------- Captured stdout setup -----------------------------
2025-07-17 07:17:38,002 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-07-17 07:17:38,002 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,002 INFO sqlalchemy.engine.Engine [cached since 0.1498s ago] {'table_name': 'students', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,003 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,003 INFO sqlalchemy.engine.Engine [cached since 0.1505s ago] {'table_name': 'teams', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,003 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,003 INFO sqlalchemy.engine.Engine [cached since 0.151s ago] {'table_name': 'upload_sessions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,004 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,004 INFO sqlalchemy.engine.Engine [cached since 0.1481s ago] {'typname_1': 'teamstatus', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,005 INFO sqlalchemy.engine.Engine COMMIT
___________ ERROR at setup of TestErrorHandling.test_file_size_limit ___________
E   RuntimeError: The current slot cannot be determined because the slot stack for this task is empty.
    This may happen if you try to create UI from a background task.
    To fix this, enter the target slot explicitly using `with container_element:`.
---------------------------- Captured stdout setup -----------------------------
2025-07-17 07:17:38,010 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-07-17 07:17:38,010 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,010 INFO sqlalchemy.engine.Engine [cached since 0.1579s ago] {'table_name': 'students', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,011 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,011 INFO sqlalchemy.engine.Engine [cached since 0.1587s ago] {'table_name': 'teams', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,012 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,012 INFO sqlalchemy.engine.Engine [cached since 0.1593s ago] {'table_name': 'upload_sessions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,012 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,013 INFO sqlalchemy.engine.Engine [cached since 0.1564s ago] {'typname_1': 'teamstatus', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,013 INFO sqlalchemy.engine.Engine COMMIT
__________ ERROR at setup of TestErrorHandling.test_invalid_file_type __________
E   RuntimeError: The current slot cannot be determined because the slot stack for this task is empty.
    This may happen if you try to create UI from a background task.
    To fix this, enter the target slot explicitly using `with container_element:`.
---------------------------- Captured stdout setup -----------------------------
2025-07-17 07:17:38,019 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-07-17 07:17:38,019 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,019 INFO sqlalchemy.engine.Engine [cached since 0.1666s ago] {'table_name': 'students', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,020 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,020 INFO sqlalchemy.engine.Engine [cached since 0.1673s ago] {'table_name': 'teams', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,020 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,020 INFO sqlalchemy.engine.Engine [cached since 0.1679s ago] {'table_name': 'upload_sessions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,021 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,021 INFO sqlalchemy.engine.Engine [cached since 0.1649s ago] {'typname_1': 'teamstatus', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,021 INFO sqlalchemy.engine.Engine COMMIT
___________ ERROR at setup of TestErrorHandling.test_encoding_error ____________
E   RuntimeError: The current slot cannot be determined because the slot stack for this task is empty.
    This may happen if you try to create UI from a background task.
    To fix this, enter the target slot explicitly using `with container_element:`.
---------------------------- Captured stdout setup -----------------------------
2025-07-17 07:17:38,026 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-07-17 07:17:38,026 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,026 INFO sqlalchemy.engine.Engine [cached since 0.174s ago] {'table_name': 'students', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,027 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,027 INFO sqlalchemy.engine.Engine [cached since 0.1748s ago] {'table_name': 'teams', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,028 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,028 INFO sqlalchemy.engine.Engine [cached since 0.1753s ago] {'table_name': 'upload_sessions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,028 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,028 INFO sqlalchemy.engine.Engine [cached since 0.1723s ago] {'typname_1': 'teamstatus', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,029 INFO sqlalchemy.engine.Engine COMMIT
________ ERROR at setup of TestUIResponsiveness.test_responsive_layout _________
E   RuntimeError: The current slot cannot be determined because the slot stack for this task is empty.
    This may happen if you try to create UI from a background task.
    To fix this, enter the target slot explicitly using `with container_element:`.
---------------------------- Captured stdout setup -----------------------------
2025-07-17 07:17:38,034 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-07-17 07:17:38,034 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,034 INFO sqlalchemy.engine.Engine [cached since 0.1813s ago] {'table_name': 'students', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,035 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,035 INFO sqlalchemy.engine.Engine [cached since 0.1822s ago] {'table_name': 'teams', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,035 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,035 INFO sqlalchemy.engine.Engine [cached since 0.1827s ago] {'table_name': 'upload_sessions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,036 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,036 INFO sqlalchemy.engine.Engine [cached since 0.1799s ago] {'typname_1': 'teamstatus', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,037 INFO sqlalchemy.engine.Engine COMMIT
_______ ERROR at setup of TestUIResponsiveness.test_upload_area_styling ________
E   RuntimeError: The current slot cannot be determined because the slot stack for this task is empty.
    This may happen if you try to create UI from a background task.
    To fix this, enter the target slot explicitly using `with container_element:`.
---------------------------- Captured stdout setup -----------------------------
2025-07-17 07:17:38,042 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-07-17 07:17:38,042 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,042 INFO sqlalchemy.engine.Engine [cached since 0.1899s ago] {'table_name': 'students', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,043 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,043 INFO sqlalchemy.engine.Engine [cached since 0.1907s ago] {'table_name': 'teams', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,043 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,044 INFO sqlalchemy.engine.Engine [cached since 0.1911s ago] {'table_name': 'upload_sessions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,044 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,044 INFO sqlalchemy.engine.Engine [cached since 0.188s ago] {'typname_1': 'teamstatus', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,044 INFO sqlalchemy.engine.Engine COMMIT
___________ ERROR at setup of TestUIResponsiveness.test_card_layouts ___________
E   RuntimeError: The current slot cannot be determined because the slot stack for this task is empty.
    This may happen if you try to create UI from a background task.
    To fix this, enter the target slot explicitly using `with container_element:`.
---------------------------- Captured stdout setup -----------------------------
2025-07-17 07:17:38,050 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-07-17 07:17:38,050 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,050 INFO sqlalchemy.engine.Engine [cached since 0.1973s ago] {'table_name': 'students', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,050 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,050 INFO sqlalchemy.engine.Engine [cached since 0.1979s ago] {'table_name': 'teams', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,051 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,051 INFO sqlalchemy.engine.Engine [cached since 0.1983s ago] {'table_name': 'upload_sessions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,051 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-07-17 07:17:38,051 INFO sqlalchemy.engine.Engine [cached since 0.1953s ago] {'typname_1': 'teamstatus', 'nspname_1': 'pg_catalog'}
2025-07-17 07:17:38,052 INFO sqlalchemy.engine.Engine COMMIT
=================================== FAILURES ===================================
/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/loading.py:1603: sqlalchemy.orm.exc.DetachedInstanceError: Instance <UploadSession at 0x72cd404c8eb0> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/loading.py:1603: sqlalchemy.orm.exc.DetachedInstanceError: Instance <UploadSession at 0x72cd404caf30> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/loading.py:1603: sqlalchemy.orm.exc.DetachedInstanceError: Instance <UploadSession at 0x72cd404cae90> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/loading.py:1603: sqlalchemy.orm.exc.DetachedInstanceError: Instance <UploadSession at 0x72cd404c8be0> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/loading.py:1603: sqlalchemy.orm.exc.DetachedInstanceError: Instance <UploadSession at 0x72cd404ca210> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/loading.py:1603: sqlalchemy.orm.exc.DetachedInstanceError: Instance <UploadSession at 0x72cd404cbed0> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/loading.py:1603: sqlalchemy.orm.exc.DetachedInstanceError: Instance <UploadSession at 0x72cd404cb1b0> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/loading.py:1603: sqlalchemy.orm.exc.DetachedInstanceError: Instance <UploadSession at 0x72cd40440370> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/loading.py:1603: sqlalchemy.orm.exc.DetachedInstanceError: Instance <UploadSession at 0x72cd404cb1b0> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/loading.py:1603: sqlalchemy.orm.exc.DetachedInstanceError: Instance <UploadSession at 0x72cd40441f40> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/loading.py:1603: sqlalchemy.orm.exc.DetachedInstanceError: Instance <UploadSession at 0x72cd40441fe0> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/loading.py:1603: sqlalchemy.orm.exc.DetachedInstanceError: Instance <UploadSession at 0x72cd40bcb390> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
=========================== short test summary info ============================
FAILED tests/test_team_assignment_service.py::TestUploadSession::test_create_upload_session
FAILED tests/test_team_assignment_service.py::TestUploadSession::test_create_upload_session_stores_students
FAILED tests/test_team_assignment_service.py::TestTeamAssignment::test_assign_teams_basic
FAILED tests/test_team_assignment_service.py::TestTeamAssignment::test_assign_teams_even_distribution
FAILED tests/test_team_assignment_service.py::TestTeamAssignment::test_assign_teams_all_unassigned
FAILED tests/test_team_assignment_service.py::TestTeamAssignment::test_assign_teams_updates_session
FAILED tests/test_team_assignment_service.py::TestTeamAssignment::test_assign_teams_creates_team_records
FAILED tests/test_team_assignment_service.py::TestTeamAssignment::test_assign_teams_assigns_students_to_teams
FAILED tests/test_team_assignment_service.py::TestTeamAssignment::test_assign_teams_session_without_students
FAILED tests/test_team_assignment_service.py::TestSessionRetrieval::test_get_upload_session_with_teams
FAILED tests/test_team_assignment_service.py::TestSessionRetrieval::test_get_all_upload_sessions
FAILED tests/test_team_assignment_service.py::TestRandomization::test_team_assignment_randomization
ERROR tests/test_csv_upload.py::TestCSVUploadUI::test_upload_page_loads - Run...
ERROR tests/test_csv_upload.py::TestCSVUploadUI::test_upload_valid_csv - Runt...
ERROR tests/test_csv_upload.py::TestCSVUploadUI::test_upload_invalid_csv - Ru...
ERROR tests/test_csv_upload.py::TestCSVUploadUI::test_team_assignment_flow - ...
ERROR tests/test_csv_upload.py::TestCSVUploadUI::test_cancel_upload - Runtime...
ERROR tests/test_csv_upload.py::TestPreviousSessionsDisplay::test_previous_sessions_empty
ERROR tests/test_csv_upload.py::TestPreviousSessionsDisplay::test_previous_sessions_display
ERROR tests/test_csv_upload.py::TestPreviousSessionsDisplay::test_view_session_details
ERROR tests/test_csv_upload.py::TestErrorHandling::test_file_size_limit - Run...
ERROR tests/test_csv_upload.py::TestErrorHandling::test_invalid_file_type - R...
ERROR tests/test_csv_upload.py::TestErrorHandling::test_encoding_error - Runt...
ERROR tests/test_csv_upload.py::TestUIResponsiveness::test_responsive_layout
ERROR tests/test_csv_upload.py::TestUIResponsiveness::test_upload_area_styling
ERROR tests/test_csv_upload.py::TestUIResponsiveness::test_card_layouts - Run...
12 failed, 17 passed, 1 deselected, 14 errors in 0.95s
2025-07-17 09:17:41 PratikLN nicegui_agent.actors[34741] INFO Selecting candidates with effective beam width: 3, current depth: 9/100
2025-07-17 09:17:41 PratikLN nicegui_agent.actors[34741] INFO Selected 3 leaf nodes for evaluation
2025-07-17 09:17:41 PratikLN api.base_agent_session[34741] INFO Emitting intermediate message: üîÑ Working on implementation (step 10)...
2025-07-17 09:17:41 PratikLN nicegui_agent.actors[34741] INFO Iteration 10: Running LLM on 3 candidates
2025-07-17 09:17:41 PratikLN llm.cached[34741] INFO lru cache miss: 69f4861de8fffd80d111596dc7ef5976
2025-07-17 09:17:41 PratikLN llm.cached[34741] INFO lru cache miss: 69f4861de8fffd80d111596dc7ef5976
2025-07-17 09:17:41 PratikLN llm.cached[34741] INFO lru cache miss: 69f4861de8fffd80d111596dc7ef5976
2025-07-17 09:17:44 PratikLN nicegui_agent.application[34741] ERROR Setting error in context:
  + Exception Group Traceback (most recent call last):
  |   File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/core/statemachine.py", line 138, in _run_invoke
  |     event = await invoke["src"].execute(*args)
  |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/nicegui_agent/actors.py", line 90, in execute
  |     nodes = await self.run_llm(
  |             ^^^^^^^^^^^^^^^^^^^
  |   File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/core/actors.py", line 123, in run_llm
  |     async with anyio.create_task_group() as tg:
  |   File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/.venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (2 sub-exceptions)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/core/actors.py", line 111, in node_fn
    |     await loop_completion(
    |   File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/llm/utils.py", line 50, in loop_completion
    |     completion = await m_client.completion(messages=payload, system_prompt=system_prompt, **kwargs)
    |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/llm/cached.py", line 281, in completion
    |     return await self._get_or_make_request(cache_key, norm_params, request_params, use_lru=True)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/llm/cached.py", line 227, in _get_or_make_request
    |     response = await self.client.completion(**safe_request_params)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/llm/anthropic_client.py", line 89, in completion
    |     return await self._create_message_with_retry(call_args)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/.venv/lib/python3.12/site-packages/tenacity/asyncio/__init__.py", line 189, in async_wrapped
    |     return await copy(fn, *args, **kwargs)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/.venv/lib/python3.12/site-packages/tenacity/asyncio/__init__.py", line 111, in __call__
    |     do = await self.iter(retry_state=retry_state)
    |          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/.venv/lib/python3.12/site-packages/tenacity/asyncio/__init__.py", line 153, in iter
    |     result = await action(retry_state)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/.venv/lib/python3.12/site-packages/tenacity/_utils.py", line 99, in inner
    |     return call(*args, **kwargs)
    |            ^^^^^^^^^^^^^^^^^^^^^
    |   File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 400, in <lambda>
    |     self._add_action_func(lambda rs: rs.outcome.result())
    |                                      ^^^^^^^^^^^^^^^^^^^
    |   File "/usr/lib/python3.12/concurrent/futures/_base.py", line 449, in result
    |     return self.__get_result()
    |            ^^^^^^^^^^^^^^^^^^^
    |   File "/usr/lib/python3.12/concurrent/futures/_base.py", line 401, in __get_result
    |     raise self._exception
    |   File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/.venv/lib/python3.12/site-packages/tenacity/asyncio/__init__.py", line 114, in __call__
    |     result = await fn(*args, **kwargs)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/llm/anthropic_client.py", line 93, in _create_message_with_retry
    |     completion = await self.client.messages.create(**call_args)
    |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/.venv/lib/python3.12/site-packages/anthropic/resources/messages/messages.py", line 2165, in create
    |     return await self._post(
    |            ^^^^^^^^^^^^^^^^^
    |   File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/.venv/lib/python3.12/site-packages/anthropic/_base_client.py", line 1920, in post
    |     return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/.venv/lib/python3.12/site-packages/anthropic/_base_client.py", line 1614, in request
    |     return await self._request(
    |            ^^^^^^^^^^^^^^^^^^^^
    |   File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/.venv/lib/python3.12/site-packages/anthropic/_base_client.py", line 1700, in _request
    |     return await self._retry_request(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/.venv/lib/python3.12/site-packages/anthropic/_base_client.py", line 1747, in _retry_request
    |     return await self._request(
    |            ^^^^^^^^^^^^^^^^^^^^
    |   File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/.venv/lib/python3.12/site-packages/anthropic/_base_client.py", line 1700, in _request
    |     return await self._retry_request(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/.venv/lib/python3.12/site-packages/anthropic/_base_client.py", line 1747, in _retry_request
    |     return await self._request(
    |            ^^^^^^^^^^^^^^^^^^^^
    |   File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/.venv/lib/python3.12/site-packages/anthropic/_base_client.py", line 1715, in _request
    |     raise self._make_status_error_from_response(err.response) from None
    | anthropic.RateLimitError: Error code: 429 - {'type': 'error', 'error': {'type': 'rate_limit_error', 'message': 'This request would exceed the rate limit for your organization (4c11aaf1-4681-4216-b47b-bf279c53a1eb) of 20,000 input tokens per minute. For details, refer to: https://docs.anthropic.com/en/api/rate-limits. You can see the response headers for current usage. Please reduce the prompt length or the maximum tokens requested, or try again later. You may also contact sales at https://www.anthropic.com/contact-sales to discuss your options for a rate limit increase.'}}
    +---------------- 2 ----------------
    | Traceback (most recent call last):
    |   File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/core/actors.py", line 111, in node_fn
    |     await loop_completion(
    |   File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/llm/utils.py", line 50, in loop_completion
    |     completion = await m_client.completion(messages=payload, system_prompt=system_prompt, **kwargs)
    |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/llm/cached.py", line 281, in completion
    |     return await self._get_or_make_request(cache_key, norm_params, request_params, use_lru=True)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/llm/cached.py", line 217, in _get_or_make_request
    |     return Completion.from_dict(self._cache[cache_key]["data"])
    |                                 ~~~~~~~~~~~^^^^^^^^^^^
    | KeyError: '69f4861de8fffd80d111596dc7ef5976'
    +------------------------------------
2025-07-17 09:17:44 PratikLN core.statemachine[34741] INFO Processing transition: [<FSMState.APPLICATION_GENERATION: 'application_generation'>] FSMState.FAILURE
2025-07-17 09:17:44 PratikLN api.fsm_tools[34741] INFO Tool call: confirm_state with input: {}
2025-07-17 09:17:44 PratikLN api.base_agent_session[34741] INFO Saving FSM state
2025-07-17 09:17:44 PratikLN api.base_agent_session[34741] INFO Got FAILED status, sending runtime error message
2025-07-17 09:17:44 PratikLN api.agent_server.async_server[34741] INFO Agent idle, will clean up session for test-bot-846423ea:ccdfd00d606a44d1bbb72e65c0f978a9 when all events are processed
2025-07-17 09:17:44 PratikLN api.agent_server.async_server[34741] INFO Cleaning up completed agent session for test-bot-846423ea:ccdfd00d606a44d1bbb72e65c0f978a9
2025-07-17 09:17:45 PratikLN tests.test_e2e[34741] INFO Generated app_name: student-team-generator
2025-07-17 09:17:45 PratikLN tests.test_e2e[34741] INFO Generated commit_message: Initial commit
2025-07-17 09:17:45 PratikLN api.agent_server.agent_client[34741] INFO No auth token available for authorization
2025-07-17 09:17:45 PratikLN api.agent_server.async_server[34741] INFO No token configured, skipping authentication
2025-07-17 09:17:45 PratikLN api.agent_server.async_server[34741] INFO Received message request for application test-bot-846423ea, trace ccdfd00d606a44d1bbb72e65c0f978a9
2025-07-17 09:17:45 PratikLN api.agent_server.async_server[34741] INFO Starting SSE stream for application
2025-07-17 09:17:45 PratikLN api.agent_server.async_server[34741] INFO Using template: nicegui_agent
2025-07-17 09:17:45 PratikLN api.agent_server.async_server[34741] INFO Running agent for session test-bot-846423ea:ccdfd00d606a44d1bbb72e65c0f978a9
2025-07-17 09:17:46 PratikLN api.agent_server.async_server[34741] INFO Creating new agent session for test-bot-846423ea:ccdfd00d606a44d1bbb72e65c0f978a9
2025-07-17 09:17:46 PratikLN api.base_agent_session[34741] INFO Processing request for test-bot-846423ea:ccdfd00d606a44d1bbb72e65c0f978a9
2025-07-17 09:17:46 PratikLN api.base_agent_session[34741] INFO Initializing new session for trace ccdfd00d606a44d1bbb72e65c0f978a9
2025-07-17 09:17:46 PratikLN api.base_agent_session[34741] INFO Last user message: [TextRaw(text='Add message with emojis to the app to make it more fun')]
2025-07-17 09:17:46 PratikLN llm.utils[34741] INFO Auto-detected backend: gemini
2025-07-17 09:17:46 PratikLN llm.utils[34741] INFO Auto-detected backend: gemini
2025-07-17 09:17:46 PratikLN api.base_agent_session[34741] INFO Looping into next step
2025-07-17 09:17:46 PratikLN llm.cached[34741] INFO lru cache miss: be7cafae94930878f4fe6e0d5fa644ed
2025-07-17 09:17:47 PratikLN api.fsm_tools[34741] INFO LLM Message: Could you please provide more details about the application you have in mind? For example:

*   What is the purpose of this application?
*   Where should these messages with emojis be displayed (e.g., in a chat, a status update, a notification)?
*   Are there any other features you'd like to include in the app?
2025-07-17 09:17:47 PratikLN api.base_agent_session[34741] INFO Got REFINEMENT_REQUEST status, sending refinement request message
2025-07-17 09:17:47 PratikLN api.agent_server.async_server[34741] INFO Agent idle, will clean up session for test-bot-846423ea:ccdfd00d606a44d1bbb72e65c0f978a9 when all events are processed
Traceback (most recent call last):
  File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/.venv/bin/generate", line 10, in <module>
    sys.exit(generate())
             ^^^^^^^^^^
  File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/commands.py", line 80, in generate
    return Fire(_generate)
           ^^^^^^^^^^^^^^^
  File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/.venv/lib/python3.12/site-packages/fire/core.py", line 135, in Fire
    component_trace = _Fire(component, args, parsed_flag_args, context, name)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/.venv/lib/python3.12/site-packages/fire/core.py", line 468, in _Fire
    component, remaining_args = _CallAndUpdateTrace(
                                ^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/.venv/lib/python3.12/site-packages/fire/core.py", line 684, in _CallAndUpdateTrace
    component = fn(*varargs, **kwargs)
                ^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/commands.py", line 88, in _generate
    anyio.run(run_e2e, prompt, True, with_edit, template_id)
  File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/.venv/lib/python3.12/site-packages/anyio/_core/_eventloop.py", line 74, in run
    return async_backend.run(func, args, {}, backend_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/.venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 2310, in run
    return runner.run(wrapper())
           ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/base_events.py", line 687, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/.venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 2298, in wrapper
    return await func(*args)
           ^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/Pratik/Desktop/projects/AppBuild/agent/tests/test_e2e.py", line 85, in run_e2e
    assert updated_diff, "No diff was generated in the agent response after edit"
           ^^^^^^^^^^^^
AssertionError: No diff was generated in the agent response after edit
